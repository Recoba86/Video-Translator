<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>زیرنویس خودکار فارسی - AI Video Subtitler</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎬 زیرنویس خودکار فارسی</h1>
            <p class="subtitle">AI Video Subtitler with Persian Translation</p>
        </header>

        <main>
            <!-- Input Section -->
            <section id="input-section" class="card">
                <h2>آدرس ویدئو را وارد کنید</h2>
                <div class="input-group">
                    <input 
                        type="text" 
                        id="video-url" 
                        placeholder="https://www.youtube.com/watch?v=..." 
                        class="url-input"
                        dir="ltr"
                    >
                    <button id="start-btn" class="btn btn-primary">
                        <span class="btn-text">شروع پردازش</span>
                        <span class="btn-icon">▶</span>
                    </button>
                </div>
                <p class="hint">
                    پشتیبانی از YouTube, Twitter (X), و سایر پلتفرم‌های ویدئویی
                </p>
            </section>

            <!-- Progress Section -->
            <section id="progress-section" class="card hidden">
                <h2>وضعیت پردازش</h2>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <p id="progress-text" class="progress-text">در حال آماده‌سازی...</p>
                    <div class="progress-percentage" id="progress-percentage">0%</div>
                </div>
                
                <div class="stages">
                    <div class="stage" id="stage-0">
                        <div class="stage-icon">⏳</div>
                        <div class="stage-text">آماده دریافت درخواست</div>
                    </div>
                    <div class="stage" id="stage-1">
                        <div class="stage-icon">⬇️</div>
                        <div class="stage-text">مرحله ۱/۵: در حال دانلود ویدئو...</div>
                    </div>
                    <div class="stage" id="stage-2">
                        <div class="stage-icon">🎤</div>
                        <div class="stage-text">مرحله ۲/۵: در حال رونویسی صوتی...</div>
                    </div>
                    <div class="stage" id="stage-3">
                        <div class="stage-icon">🔄</div>
                        <div class="stage-text">مرحله ۳/۵: در حال ترجمه به فارسی...</div>
                    </div>
                    <div class="stage" id="stage-4">
                        <div class="stage-icon">📝</div>
                        <div class="stage-text">مرحله ۴/۵: در حال ساخت فایل زیرنویس...</div>
                    </div>
                    <div class="stage" id="stage-5">
                        <div class="stage-icon">🎬</div>
                        <div class="stage-text">مرحله ۵/۵: در حال چسباندن زیرنویس...</div>
                    </div>
                </div>
            </section>

            <!-- Result Section -->
            <section id="result-section" class="card hidden">
                <h2 class="success-title">✅ پردازش با موفقیت انجام شد!</h2>
                
                <div class="video-container">
                    <video id="result-video" controls class="result-video">
                        <source id="video-source" type="video/mp4">
                        مرورگر شما از پخش ویدئو پشتیبانی نمی‌کند.
                    </video>
                </div>

                <div class="action-buttons">
                    <button id="download-btn" class="btn btn-success">
                        <span class="btn-icon">⬇️</span>
                        <span class="btn-text">دانلود فایل نهایی</span>
                    </button>
                    <button id="delete-btn" class="btn btn-danger">
                        <span class="btn-icon">🗑️</span>
                        <span class="btn-text">حذف فایل از سرور</span>
                    </button>
                </div>

                <button id="new-process-btn" class="btn btn-secondary">
                    پردازش ویدئو جدید
                </button>
            </section>

            <!-- Error Section -->
            <section id="error-section" class="card hidden error-card">
                <h2>❌ خطا در پردازش</h2>
                <p id="error-message" class="error-message"></p>
                <button id="retry-btn" class="btn btn-primary">تلاش مجدد</button>
            </section>
        </main>

        <footer>
            <p>
                ساخته شده با ❤️ توسط هوش مصنوعی
                <br>
                <small>Google Cloud Speech-to-Text & Translation API</small>
            </p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
